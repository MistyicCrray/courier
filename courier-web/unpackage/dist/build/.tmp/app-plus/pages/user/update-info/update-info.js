(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/update-info/update-info"],{"552f":function(e,n,t){"use strict";t.r(n);var o=t("dfb2"),a=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,function(){return o[e]})}(u);n["default"]=a.a},7943:function(e,n,t){"use strict";t.r(n);var o=t("e41d"),a=t("552f");for(var u in a)"default"!==u&&function(e){t.d(n,e,function(){return a[e]})}(u);t("e5d9");var i=t("2877"),s=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports},dfb2:function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;s(t("128c"));var a=t("7e1a"),u=t("4b47"),i=t("4b47");function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){return t.e("components/cmd-nav-bar/cmd-nav-bar").then(t.bind(null,"e2f3"))},c=function(){return t.e("components/cmd-page-body/cmd-page-body").then(t.bind(null,"76fb"))},f=function(){return t.e("components/cmd-transition/cmd-transition").then(t.bind(null,"4129"))},d=function(){return t.e("components/cmd-input/cmd-input").then(t.bind(null,"591c"))},l={components:{cmdNavBar:r,cmdPageBody:c,cmdTransition:f,cmdInput:d},data:function(){return{user:{userName:"",phone:"",email:""},userInfo:{},imgList:[],imgPath:"",token:"",imgUrl:i.imgUrl,phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,emailReg:/^\w+@[a-z0-9]+\.[a-z]{2,4}$/}},onLoad:function(){var n=this;n.loadData(),e.getStorage({key:"userInfo",success:function(e){n.userInfo=e.data}}),e.getStorage({key:"accessToken",success:function(e){n.token=e.data}})},methods:{loadData:function(){var n=this;e.showLoading({mask:!0,title:"操作中"});var t="user/curUser";return(0,a.getRquest)(t,"").then(function(t){console.info(o(t," at pages\\user\\update-info\\update-info.vue:110")),n.user=t.data,e.hideLoading()}).catch(function(n){console.info(o(n," at pages\\user\\update-info\\update-info.vue:114")),e.hideLoading()})},submit:function(){var n=this;if(e.showLoading({mask:!0,title:"操作中"}),this.phoneReg.test(n.user.phone)){if(this.emailReg.test(n.user.email)){var t="user/updateCurUser",i=n.user;return e.uploadFile({url:u.imgUploadUrl+"user/changeStudentIdCard",filePath:this.imgPath,name:"img",header:{accessToken:n.token},success:function(e){console.log(o(e.data," at pages\\user\\update-info\\update-info.vue:148"))},fail:function(e){console.info(o(e," at pages\\user\\update-info\\update-info.vue:151"))}}),(0,a.getRquest)(t,i).then(function(t){console.info(o(t," at pages\\user\\update-info\\update-info.vue:155")),200==t.code&&(e.showToast({title:"修改成功",icon:"none"}),n.userInfo.userName=n.user.userName,n.userInfo.phone=n.user.phone,n.userInfo.email=n.user.email,e.setStorage({key:"userInfo",data:n.userInfo})),e.hideLoading()}).catch(function(n){console.info(o(n," at pages\\user\\update-info\\update-info.vue:171")),e.hideLoading()})}e.showToast({title:"请输入正确的手机号",icon:"none"})}else e.showToast({title:"请输入正确的手机号",icon:"none"})},ChooseImage:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){n.imgList=e.tempFilePaths,n.imgPath=e.tempFilePaths[0]}})},DelImg:function(e){this.imgList.splice(e.currentTarget.dataset.index,1)}}};n.default=l}).call(this,t("6e42")["default"],t("0de9")["default"])},e41d:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},a=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a})},e5d9:function(e,n,t){"use strict";var o=t("f75f"),a=t.n(o);a.a},f75f:function(e,n,t){}},[["85ff","common/runtime","common/vendor"]]]);